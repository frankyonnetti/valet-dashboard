{"version":3,"file":"scripts.js","sources":["scripts.js"],"sourcesContent":["function ready () {\n  const localStorage = window.localStorage\n  // Add class when JS is loaded.\n  const htmlTag = document.querySelector('html')\n  htmlTag.classList.add('js-loaded')\n\n  // ! server version\n  // --------------------------------------------------------------------------\n  const valetVersion = document.querySelector('.server-version')\n  // remove \"Laravel Valet\" from server version output\n  const version = valetVersion.innerHTML.replace('Laravel Valet ', 'v')\n  // set new ouput\n  valetVersion.innerHTML = version\n\n  // ! terminal output / table\n  // --------------------------------------------------------------------------\n  // select terminal output table\n  const selectValetLinks = document.querySelector('#links-table')\n  // select container element\n  const newValetLinks = document.querySelector('.valetlinks-container')\n\n  // https://javascript.info/regexp-quantifiers\n  const valetLinks = selectValetLinks.innerHTML\n    // replace SSL column \"X\" with icon\n    .replace(/X/g, '<i class=\"fas fa-lock\"></i>')\n    // replace pluses \"+\" and dashes \"-\"\n    .replace(/\\+(.+)\\+/g, '')\n    // replace pipes \"|\" starting from column 5\n    .replace(/((?:[^|]*\\|){4}[^|]*)\\|/g, '$1</em></span></div></div>')\n    .replace(/((?:[^|]*\\|){3}[^|]*)\\|/g, '$1</div><div class=\"col path\"><span><em>')\n    .replace(/((?:[^|]*\\|){2}[^|]*)\\|/g, '$1</div><div class=\"col url\">')\n    .replace(/((?:[^|]*\\|){1}[^|]*)\\|/g, '$1</div><div class=\"col ssl\">')\n    .replace(/((?:[^|]*\\|){0}[^|]*)\\|/g, '$1<div class=\"row\"><div class=\"col grip\"></div><div class=\"col site\">')\n    // wrap anchor around URL\n    .replace(/http(.*).test/g, function (localURL) {\n      return '<a href=\"' + localURL + '\">' + localURL + '</a>'\n    })\n\n  // build new hosts container\n  newValetLinks.innerHTML = valetLinks\n\n  // remove header row\n  function removeHeaderRow () {\n    document.querySelector('.valetlinks-container .row:first-child').remove()\n  }\n  removeHeaderRow()\n\n  // hide imported links table\n  document.getElementById('links-table').style.display = 'none'\n\n  // ! show local path on hover\n  // --------------------------------------------------------------------------\n  const localPathSpan = document.querySelectorAll('.valetlinks-container .col span')\n\n  function changeOnOver () {\n    this.classList.add('show-path')\n  }\n\n  function changeOnOut () {\n    const tooltip = this\n    tooltip.classList.remove('show-path')\n    tooltip.classList.add('fade')\n    setTimeout(function () {\n      tooltip.classList.remove('fade')\n    }, 300)\n  }\n\n  localPathSpan.forEach(path => path.addEventListener('mouseover', changeOnOver))\n  localPathSpan.forEach(path => path.addEventListener('mouseout', changeOnOut))\n\n  // ! Grouping headers\n  // --------------------------------------------------------------------------\n  const groupField = document.querySelector('.create-group-input')\n  const groupButton = document.querySelector('.create-group')\n\n  // create grouping headers\n  function creatGroupHeader () {\n    const timeStamp = Date.now()\n    const groupFieldValue = groupField.value.replace(/\\s+/g, '_') + '_' + timeStamp\n    const groupFieldValueLabel = groupField.value\n    if (groupFieldValueLabel.length < 1) { return }\n    const groupDiv = document.createElement('div')\n    groupDiv.setAttribute('data-group', 'GROUP_' + groupFieldValue)\n    groupDiv.innerHTML = `\n    <div class=\"grip\"></div>\n    <div class=\"label\"><em>${groupFieldValueLabel}</em></div>\n    <div class=\"remove\"><i class=\"fas fa-times\"></i></div>`\n    groupDiv.classList.add('row', 'group')\n    localStorage.setItem('GROUP_' + groupFieldValue, groupDiv.outerHTML)\n    newValetLinks.prepend(groupDiv)\n    groupField.value = ''\n    // reload \"delete group header\" function\n    deleteGroupHeader()\n  }\n\n  groupButton.addEventListener('click', event => {\n    creatGroupHeader()\n    event.preventDefault()\n  })\n\n  // load grouping headers on load.\n  const search = 'GROUP_'\n  const groupValues = Object\n    .keys(localStorage)\n    .filter((key) => key.startsWith(search))\n    .map((key) => localStorage[key])\n  // https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML\n  newValetLinks.insertAdjacentHTML('afterbegin', groupValues.join(''))\n\n  // delete grouping header button\n  function deleteGroupHeader () {\n    const hostRow = newValetLinks.children\n    const groupClose = document.querySelectorAll('.group .remove')\n\n    for (let i = 0; i < hostRow.length; i++) {\n      if (groupClose[i] != null) {\n        const partentData = groupClose[i].parentNode.getAttribute('data-group')\n        groupClose[i].addEventListener('click', event => {\n          localStorage.removeItem(partentData)\n          const groupDiv = document.querySelector('[data-group=\"' + partentData + '\"]')\n          groupDiv.remove()\n        })\n      }\n    }\n  }\n  deleteGroupHeader()\n\n  // ! sortable\n  // --------------------------------------------------------------------------\n  const valetSortEl = document.getElementById('valetSort')\n  const clearSortBtnContainer = document.querySelector('.sortable-container')\n  const clearSortBtn = document.querySelector('.clearsort')\n\n  const sortable = Sortable.create(valetSortEl, { // eslint-disable-line\n    store: {\n      // Get the order of elements. Called once during initialization.\n      get: function (sortable) {\n        const order = localStorage.getItem(sortable.options.group.name)\n        return order ? order.split('|') : []\n      },\n\n      // Save the order of elements. Called onEnd (when the item is dropped).\n      set: function (sortable) {\n        const order = sortable.toArray()\n        localStorage.setItem(sortable.options.group.name, order.join('|'))\n        clearSortBtnContainer.classList.remove('disabled')\n        clearSortBtn.removeAttribute('disabled')\n      }\n    },\n    group: 'hostslist',\n    forceFallback: true,\n    handle: '.grip',\n    animation: 150,\n    ghostClass: 'ghost-class'\n  })\n\n  // Set button to disabled if no sort is set in localStorage\n  function disableSortButton () {\n    if (localStorage.getItem('hostslist') === null) {\n      clearSortBtnContainer.classList.add('disabled')\n      clearSortBtn.setAttribute('disabled', 'disabled')\n    }\n  }\n  disableSortButton()\n\n  // Clear sortable and grouping localStorage\n  function clearGroupingStorage () {\n    const search = 'GROUP_'\n    Object\n      .keys(localStorage)\n      .filter((key) => key.startsWith(search))\n      .map((key) => delete localStorage[key])\n  }\n\n  function clearSortStorage () {\n    delete localStorage.hostslist\n    clearGroupingStorage()\n    newValetLinks.innerHTML = valetLinks // reload host list\n    removeHeaderRow()\n    disableSortButton()\n    closeModal()\n  }\n  // Clear list localStorage button\n  clearSortBtn.onclick = clearSortStorage\n\n  // ! modal\n  // --------------------------------------------------------------------------\n  // buttons to open \"modal\" from sidebar\n  const openModalResetBtn = document.querySelector('.openmodal-reset')\n  const openModalAddBtn = document.querySelector('.openmodal-add')\n  // modal container\n  const modal = document.querySelector('.modal')\n  const modalBg = document.querySelector('.modal-bg')\n  const modalInput = document.querySelector('.create-group-input')\n  const closeSortModalBtn = document.querySelector('.cancelsort')\n  const closeCreateModalBtn = document.querySelector('.cancel-group')\n\n  // Open modal(s)\n  function openModalReset () {\n    modal.classList.add('open', 'reset-list')\n    modalBg.classList.add('open')\n  }\n  openModalResetBtn.onclick = openModalReset\n\n  function openModalAdd () {\n    modal.classList.add('open', 'add-group')\n    modalBg.classList.add('open')\n    setTimeout(function () {\n      modalInput.focus()\n    }, 750)\n  }\n  openModalAddBtn.onclick = openModalAdd\n\n  // CLose modal(s)\n  function closeModal () {\n    modal.classList.add('closing')\n    modalBg.classList.add('closing')\n    setTimeout(function () {\n      modal.classList.remove('open', 'closing', 'reset-list', 'add-group')\n      modalBg.classList.remove('open', 'closing')\n    }, 1000)\n  }\n  closeSortModalBtn.onclick = closeModal\n  closeCreateModalBtn.onclick = closeModal\n  modalBg.onclick = closeModal\n\n  document.addEventListener('keyup', event => {\n    if (event.key === 'Escape') {\n      if (modal.classList.contains('open')) {\n        closeModal()\n      }\n    }\n  })\n\n  // add new group header with key\n  document.addEventListener('keyup', event => {\n    if (event.key === 'Enter') {\n      if (modal.classList.contains('open', 'add-group')) {\n        creatGroupHeader()\n        closeModal()\n      }\n    }\n  })\n\n  // ! light or dark mode\n  // --------------------------------------------------------------------------\n  const conatiners = document.querySelectorAll('.color-mode')\n  const modeSwitch = document.getElementById('mode-switch')\n\n  // set initial localStorage and body class if none found,\n  // or load class if found in localStorage\n  if (localStorage.getItem('themeMode') === null) {\n    localStorage.setItem('themeMode', 'light')\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else\n  if (localStorage.getItem('themeMode') === 'light') {\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else {\n    conatiners.forEach(mode => mode.classList.add('dark-mode'))\n  }\n\n  // switch between light and dark mode\n  modeSwitch.addEventListener('click', event => {\n    if (localStorage.getItem('themeMode') !== null) {\n      if (localStorage.getItem('themeMode') === 'light') {\n        localStorage.setItem('themeMode', 'dark')\n        conatiners.forEach(mode => mode.classList.remove('light-mode'))\n        conatiners.forEach(mode => mode.classList.add('dark-mode'))\n      } else {\n        localStorage.setItem('themeMode', 'light')\n        conatiners.forEach(mode => mode.classList.remove('dark-mode'))\n        conatiners.forEach(mode => mode.classList.add('light-mode'))\n      }\n    }\n  })\n\n  // ! color picker\n  // --------------------------------------------------------------------------\n  // \"active-color\" is set on color input 'name' attribute\n  const colorInput = document.getElementById('color-picker')\n\n  // set initial localStorage for active-color,\n  // or load active-color found in localStorage\n  if (localStorage.getItem('activeColor') === null) {\n    localStorage.setItem('activeColor', '#ba68c8')\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  } else {\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  }\n\n  // change active-color\n  function handleColorUpdate () {\n    document.documentElement.style.setProperty(`--${this.name}`, this.value)\n    localStorage.setItem('activeColor', colorInput.value)\n  }\n\n  colorInput.addEventListener('change', handleColorUpdate)\n  colorInput.addEventListener('mousemove', handleColorUpdate)\n}\ndocument.addEventListener('DOMContentLoaded', ready)\n"],"names":["ready","localStorage","window","htmlTag","document","querySelector","classList","add","valetVersion","version","innerHTML","replace","selectValetLinks","newValetLinks","valetLinks","localURL","removeHeaderRow","remove","getElementById","style","display","localPathSpan","querySelectorAll","changeOnOver","this","changeOnOut","tooltip","setTimeout","forEach","path","addEventListener","groupField","groupButton","creatGroupHeader","timeStamp","Date","now","groupFieldValue","value","groupFieldValueLabel","length","groupDiv","createElement","setAttribute","setItem","outerHTML","prepend","deleteGroupHeader","event","preventDefault","groupValues","Object","keys","filter","key","startsWith","map","hostRow","children","groupClose","i","partentData","parentNode","getAttribute","removeItem","insertAdjacentHTML","join","valetSortEl","clearSortBtnContainer","clearSortBtn","getActiveColor","Sortable","create","store","get","sortable","order","getItem","options","group","name","split","set","toArray","removeAttribute","forceFallback","handle","animation","ghostClass","disableSortButton","onclick","hostslist","closeModal","openModalResetBtn","openModalAddBtn","modal","modalBg","modalInput","closeSortModalBtn","closeCreateModalBtn","focus","contains","conatiners","modeSwitch","mode","colorInput","handleColorUpdate","documentElement","setProperty"],"mappings":"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"}