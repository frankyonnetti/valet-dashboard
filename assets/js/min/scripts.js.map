{"version":3,"file":"scripts.js","sources":["scripts.js"],"sourcesContent":["function ready () {\n  const localStorage = window.localStorage\n  // Add class when JS is loaded.\n  const htmlTag = document.querySelector('html')\n  htmlTag.classList.add('js-loaded')\n\n  // ! server version\n  // --------------------------------------------------------------------------\n  const valetVersion = document.querySelector('.server-version')\n  // remove \"Laravel Valet\" from server version output\n  const version = valetVersion.innerHTML.replace('Laravel Valet ', 'v')\n  // set new ouput\n  valetVersion.innerHTML = version\n\n  // ! terminal output / table\n  // --------------------------------------------------------------------------\n  // select terminal output table\n  const selectValetLinks = document.querySelector('#links-table')\n  // select container element\n  const newValetLinks = document.querySelector('.valetlinks-container')\n\n  // https://javascript.info/regexp-quantifiers\n  const valetLinks = selectValetLinks.innerHTML\n    // replace SSL column \"X\" with icon\n    .replace(/X/g, '<i class=\"fas fa-lock\"></i>')\n    // replace pluses \"+\" and dashes \"-\"\n    .replace(/\\+(.+)\\+/g, '')\n    // replace pipes \"|\" starting from column 5\n    .replace(/((?:[^|]*\\|){4}[^|]*)\\|/g, '$1</em></span></div></div>')\n    .replace(/((?:[^|]*\\|){3}[^|]*)\\|/g, '$1</div><div class=\"col path\"><span><em>')\n    .replace(/((?:[^|]*\\|){2}[^|]*)\\|/g, '$1</div><div class=\"col url\">')\n    .replace(/((?:[^|]*\\|){1}[^|]*)\\|/g, '$1</div><div class=\"col ssl\">')\n    .replace(/((?:[^|]*\\|){0}[^|]*)\\|/g, '$1<div class=\"row\"><div class=\"col grip\"></div><div class=\"col site\">')\n    // wrap anchor around URL\n    .replace(/http(.*).test/g, function (localURL) {\n      return '<a href=\"' + localURL + '\">' + localURL + '</a>'\n    })\n\n  // build new hosts container\n  newValetLinks.innerHTML = valetLinks\n\n  // remove header row\n  function removeHeaderRow () {\n    document.querySelector('.valetlinks-container .row:first-child').remove()\n  }\n  removeHeaderRow()\n\n  // hide imported links table\n  document.getElementById('links-table').style.display = 'none'\n\n  // ! show local path on hover\n  // --------------------------------------------------------------------------\n  const localPathSpan = document.querySelectorAll('.valetlinks-container .col span')\n\n  function changeOnOver () {\n    this.classList.add('show-path')\n  }\n\n  function changeOnOut () {\n    const tooltip = this\n    tooltip.classList.remove('show-path')\n    tooltip.classList.add('fade')\n    setTimeout(function () {\n      tooltip.classList.remove('fade')\n    }, 300)\n  }\n\n  localPathSpan.forEach(path => path.addEventListener('mouseover', changeOnOver))\n  localPathSpan.forEach(path => path.addEventListener('mouseout', changeOnOut))\n\n  // ! Grouping headers\n  // --------------------------------------------------------------------------\n  const groupLabelContainer = document.querySelector('.grouping-wrap')\n  const expandGroupFieldButton = document.querySelector('.expand-group-field')\n  const groupFormContainer = document.querySelector('.grouping-form')\n  const groupField = document.querySelector('.create-group-input')\n  const groupButton = document.querySelector('.create-group-button')\n  const closeGroupButton = document.querySelector('.close-group-button')\n\n  // expand / collapse create grouping header field\n  function expandGroupField () {\n    groupFormContainer.classList.add('expand')\n    groupLabelContainer.classList.add('fadeout')\n  }\n  expandGroupFieldButton.onclick = expandGroupField\n\n  function collapseGroupField () {\n    groupFormContainer.classList.remove('expand')\n    groupLabelContainer.classList.remove('fadeout')\n  }\n  closeGroupButton.onclick = collapseGroupField\n\n  // create grouping headers\n  function creatGroupHeader () {\n    const timeStamp = Date.now()\n    const groupFieldValue = groupField.value.replace(/\\s+/g, '_') + '_' + timeStamp\n    const groupFieldValueLabel = groupField.value\n    if (groupFieldValueLabel.length < 1) { return }\n    const groupDiv = document.createElement('div')\n    groupDiv.setAttribute('data-group', 'GROUP_' + groupFieldValue)\n    groupDiv.innerHTML = `\n    <div class=\"grip\"></div>\n    <div class=\"label\"><em>${groupFieldValueLabel}</em></div>\n    <div class=\"remove\"><i class=\"fas fa-times\"></i></div>`\n    groupDiv.classList.add('row', 'group')\n    localStorage.setItem('GROUP_' + groupFieldValue, groupDiv.outerHTML)\n    newValetLinks.prepend(groupDiv)\n    groupField.value = ''\n  }\n\n  groupButton.addEventListener('click', event => {\n    creatGroupHeader()\n    event.preventDefault()\n  })\n\n  document.addEventListener('keyup', event => {\n    if (event.key === 'Enter') {\n      if (groupFormContainer.classList.contains('expand')) {\n        creatGroupHeader()\n      }\n    }\n  })\n\n  // load grouping headers on load.\n  const search = 'GROUP_'\n  const groupValues = Object\n    .keys(localStorage)\n    .filter((key) => key.startsWith(search))\n    .map((key) => localStorage[key])\n  // https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML\n  newValetLinks.insertAdjacentHTML('afterbegin', groupValues.join(''))\n\n  // delete grouping header button\n  const hostRow = newValetLinks.children\n  const groupClose = document.querySelectorAll('.group .remove')\n\n  for (let i = 0; i < hostRow.length; i++) {\n    if (groupClose[i] != null) {\n      const partentData = groupClose[i].parentNode.getAttribute('data-group')\n      groupClose[i].addEventListener('click', event => {\n        localStorage.removeItem(partentData)\n        const groupDiv = document.querySelector('[data-group=\"' + partentData + '\"]')\n        groupDiv.remove()\n      })\n    }\n  }\n\n  // const groupClose = document.querySelector('.remove')\n  // groupClose.addEventListener('click', event => {\n  //   const partentData = groupClose.parentNode.getAttribute('data-group')\n  //   console.log(partentData)\n  // })\n\n  // ! sortable\n  // --------------------------------------------------------------------------\n  const valetSortEl = document.getElementById('valetSort')\n  const clearSortBtnContainer = document.querySelector('.sortable-container')\n  const clearSortBtn = document.querySelector('.clearsort')\n\n  const sortable = Sortable.create(valetSortEl, { // eslint-disable-line\n    store: {\n      // Get the order of elements. Called once during initialization.\n      get: function (sortable) {\n        const order = localStorage.getItem(sortable.options.group.name)\n        return order ? order.split('|') : []\n      },\n\n      // Save the order of elements. Called onEnd (when the item is dropped).\n      set: function (sortable) {\n        const order = sortable.toArray()\n        localStorage.setItem(sortable.options.group.name, order.join('|'))\n        clearSortBtnContainer.classList.remove('disabled')\n        clearSortBtn.removeAttribute('disabled')\n      }\n    },\n    group: 'hostslist',\n    forceFallback: true,\n    handle: '.grip',\n    animation: 150,\n    ghostClass: 'ghost-class'\n  })\n\n  // Set button to disabled if no sort is set in localStorage\n  function disableSortButton () {\n    if (localStorage.getItem('hostslist') === null) {\n      clearSortBtnContainer.classList.add('disabled')\n      clearSortBtn.setAttribute('disabled', 'disabled')\n    }\n  }\n  disableSortButton()\n\n  // Clear sortable and grouping localStorage\n  function clearGroupingStorage () {\n    const search = 'GROUP_'\n    Object\n      .keys(localStorage)\n      .filter((key) => key.startsWith(search))\n      .map((key) => delete localStorage[key])\n  }\n\n  function clearSortStorage () {\n    delete localStorage.hostslist\n    clearGroupingStorage()\n    newValetLinks.innerHTML = valetLinks // reload host list\n    removeHeaderRow()\n    disableSortButton()\n    closeModal()\n  }\n  // Clear list localStorage button\n  clearSortBtn.onclick = clearSortStorage\n\n  // modal\n  const openModalBtn = document.querySelector('.clearmodal')\n  const closeModalBtn = document.querySelector('.cancel')\n  const modal = document.querySelector('.modal')\n  const modalBg = document.querySelector('.modal-bg')\n  // Open modal\n  function openModal () {\n    modal.classList.add('open')\n    modalBg.classList.add('open')\n  }\n  openModalBtn.onclick = openModal\n\n  // CLose modal\n  function closeModal () {\n    modal.classList.add('closing')\n    modalBg.classList.add('closing')\n    setTimeout(function () {\n      modal.classList.remove('open', 'closing')\n      modalBg.classList.remove('open', 'closing')\n    }, 1000)\n  }\n  closeModalBtn.onclick = closeModal\n  modalBg.onclick = closeModal\n\n  document.addEventListener('keyup', event => {\n    if (event.key === 'Escape') {\n      if (modal.classList.contains('open')) {\n        closeModal()\n      }\n      if (groupFormContainer.classList.contains('expand')) {\n        groupFormContainer.classList.remove('expand')\n        groupLabelContainer.classList.remove('fadeout')\n      }\n    }\n  })\n\n  // ! light or dark mode\n  // --------------------------------------------------------------------------\n  const conatiners = document.querySelectorAll('.color-mode')\n  const modeSwitch = document.getElementById('mode-switch')\n\n  // set initial localStorage and body class if none found,\n  // or load class if found in localStorage\n  if (localStorage.getItem('themeMode') === null) {\n    localStorage.setItem('themeMode', 'light')\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else\n  if (localStorage.getItem('themeMode') === 'light') {\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else {\n    conatiners.forEach(mode => mode.classList.add('dark-mode'))\n  }\n\n  // switch between light and dark mode\n  modeSwitch.addEventListener('click', event => {\n    if (localStorage.getItem('themeMode') !== null) {\n      if (localStorage.getItem('themeMode') === 'light') {\n        localStorage.setItem('themeMode', 'dark')\n        conatiners.forEach(mode => mode.classList.remove('light-mode'))\n        conatiners.forEach(mode => mode.classList.add('dark-mode'))\n      } else {\n        localStorage.setItem('themeMode', 'light')\n        conatiners.forEach(mode => mode.classList.remove('dark-mode'))\n        conatiners.forEach(mode => mode.classList.add('light-mode'))\n      }\n    }\n  })\n\n  // ! color picker\n  // --------------------------------------------------------------------------\n  // \"active-color\" is set on color input 'name' attribute\n  const colorInput = document.getElementById('color-picker')\n\n  // set initial localStorage for active-color,\n  // or load active-color found in localStorage\n  if (localStorage.getItem('activeColor') === null) {\n    localStorage.setItem('activeColor', '#ba68c8')\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  } else {\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  }\n\n  // change active-color\n  function handleColorUpdate () {\n    // console.log(this.value)\n    document.documentElement.style.setProperty(`--${this.name}`, this.value)\n    localStorage.setItem('activeColor', colorInput.value)\n  }\n\n  colorInput.addEventListener('change', handleColorUpdate)\n  colorInput.addEventListener('mousemove', handleColorUpdate)\n}\ndocument.addEventListener('DOMContentLoaded', ready)\n"],"names":["ready","localStorage","window","htmlTag","document","querySelector","classList","add","valetVersion","version","innerHTML","replace","selectValetLinks","newValetLinks","valetLinks","localURL","removeHeaderRow","remove","getElementById","style","display","localPathSpan","querySelectorAll","changeOnOver","this","changeOnOut","tooltip","setTimeout","forEach","path","addEventListener","groupLabelContainer","expandGroupFieldButton","groupFormContainer","groupField","groupButton","closeGroupButton","creatGroupHeader","timeStamp","Date","now","groupFieldValue","value","groupFieldValueLabel","length","groupDiv","createElement","setAttribute","setItem","outerHTML","prepend","onclick","event","preventDefault","key","contains","groupValues","Object","keys","filter","startsWith","map","insertAdjacentHTML","join","hostRow","children","groupClose","i","partentData","parentNode","getAttribute","removeItem","valetSortEl","clearSortBtnContainer","clearSortBtn","getActiveColor","Sortable","create","store","get","sortable","order","getItem","options","group","name","split","set","toArray","removeAttribute","forceFallback","handle","animation","ghostClass","disableSortButton","hostslist","closeModal","openModalBtn","closeModalBtn","modal","modalBg","conatiners","modeSwitch","mode","colorInput","handleColorUpdate","documentElement","setProperty"],"mappings":"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"}