{"version":3,"file":"scripts.js","sources":["scripts.js"],"sourcesContent":["function ready () {\r\n  const localStorage = window.localStorage\r\n  // Add class when JS is loaded.\r\n  const htmlTag = document.querySelector('html')\r\n  htmlTag.classList.add('js-loaded')\r\n\r\n  // ! terminal output / table\r\n  // --------------------------------------------------------------------------\r\n  // select terminal output table\r\n  const selectValetLinks = document.querySelector('#links-table')\r\n  // select container element\r\n  const newValetLinks = document.querySelector('.valetlinks-container')\r\n\r\n  // https://javascript.info/regexp-quantifiers\r\n  const valetLinks = selectValetLinks.innerHTML\r\n    // replace SSL column \"X\" with icon\r\n    .replace(/X/g, '<i class=\"fas fa-lock\"></i>')\r\n    // replace pluses \"+\" and dashes \"-\"\r\n    .replace(/\\+(.+)\\+/g, '')\r\n    // replace pipes \"|\" starting from column 5\r\n    .replace(/((?:[^|]*\\|){4}[^|]*)\\|/g, '$1</em></span></div></div>')\r\n    .replace(/((?:[^|]*\\|){3}[^|]*)\\|/g, '$1</div><div class=\"col path\"><span><em>')\r\n    .replace(/((?:[^|]*\\|){2}[^|]*)\\|/g, '$1</div><div class=\"col url\">')\r\n    .replace(/((?:[^|]*\\|){1}[^|]*)\\|/g, '$1</div><div class=\"col ssl\">')\r\n    .replace(/((?:[^|]*\\|){0}[^|]*)\\|/g, '$1<div class=\"row\"><div class=\"col grip\"></div><div class=\"col site\">')\r\n    // wrap anchor around URL\r\n    .replace(/http(.*)\\.test/g, function (localURL) {\r\n      return '<a href=\"' + localURL + '\" tabindex=\"2\">' + localURL + '</a>'\r\n    })\r\n\r\n  // build new hosts container\r\n  newValetLinks.innerHTML = valetLinks\r\n\r\n  // remove header row\r\n  function removeHeaderRow () {\r\n    document.querySelector('.valetlinks-container .row:first-child').remove()\r\n  }\r\n  removeHeaderRow()\r\n\r\n  // hide imported links table\r\n  document.getElementById('links-table').style.display = 'none'\r\n\r\n  // ! Unique \"data\" attribute\r\n  // --------------------------------------------------------------------------\r\n  const hostRow = newValetLinks.children\r\n\r\n  for (let hostCount = 0; hostCount < hostRow.length; hostCount++) {\r\n    // add a unique \"data\" attribute to each row\r\n    const hostSite = hostRow[hostCount].children.item(1).innerText.replace(/\\./g, '_')\r\n    hostRow[hostCount].setAttribute('data-host', hostSite)\r\n  }\r\n\r\n  // ! trim down technology version output to get just the version number.\r\n  // --------------------------------------------------------------------------\r\n  // valet\r\n  const valetVersion = document.querySelector('.valet-version')\r\n  // remove \"Laravel Valet\" from server version output\r\n  const getValetVersion = valetVersion.innerHTML.replace('Laravel Valet ', '')\r\n  valetVersion.innerHTML = getValetVersion\r\n  // dnsmasq\r\n  const dnsmasqVersion = document.querySelector('.dnsmasq .tech-info')\r\n  if (dnsmasqVersion !== null) {\r\n    // get substring between two words\r\n    const getDnsmasqVersion = dnsmasqVersion.innerHTML.split('Dnsmasq version ').pop().split('  Copyright')[0]\r\n    dnsmasqVersion.innerHTML = getDnsmasqVersion\r\n  }\r\n  // mariadb\r\n  const mariadbVersion = document.querySelector('.mariadb .tech-info')\r\n  if (mariadbVersion !== null) {\r\n    // get substring between two words\r\n    const getMariadbVersion = mariadbVersion.innerHTML.split('Distrib ').pop().split('-MariaDB')[0]\r\n    mariadbVersion.innerHTML = getMariadbVersion\r\n  }\r\n  // nginx\r\n  const nginxVersion = document.querySelector('.nginx .tech-info')\r\n  if (nginxVersion !== null) {\r\n    // get the first set of floating numbers\r\n    const getNginxVersion = nginxVersion.innerHTML.replace('nginx version: nginx/', '')\r\n    nginxVersion.innerHTML = getNginxVersion\r\n  }\r\n  // phpmyadmin\r\n  const phpmyadminPath = document.querySelector('[data-host=\"phpmyadmin\"] .path em')\r\n  if (phpmyadminPath !== null) {\r\n    const phpmyadminURL = document.querySelector('[data-host=\"phpmyadmin\"] .url a')\r\n    const phpmyadminLink = document.querySelector('.phpmyadmin .tech-label a')\r\n    const phpmyadminVersion = document.querySelector('.phpmyadmin .tech-info')\r\n    const getPHPmyadminPath = phpmyadminPath.innerHTML.split('/')\r\n    document.querySelector('.phpmyadmin').removeAttribute('style')\r\n    phpmyadminLink.setAttribute('href', phpmyadminURL)\r\n    phpmyadminVersion.innerHTML = getPHPmyadminPath[getPHPmyadminPath.length - 3]\r\n  }\r\n\r\n  // ! show local path on hover\r\n  // --------------------------------------------------------------------------\r\n  const localPathSpan = document.querySelectorAll('.valetlinks-container .col span')\r\n\r\n  function changeOnOver () {\r\n    this.classList.add('show-path')\r\n  }\r\n\r\n  function changeOnOut () {\r\n    const tooltip = this\r\n    tooltip.classList.remove('show-path')\r\n    tooltip.classList.add('fade')\r\n    setTimeout(function () {\r\n      tooltip.classList.remove('fade')\r\n    }, 300)\r\n  }\r\n\r\n  localPathSpan.forEach(path => path.addEventListener('mouseover', changeOnOver))\r\n  localPathSpan.forEach(path => path.addEventListener('mouseout', changeOnOut))\r\n\r\n  // ! sortable\r\n  // --------------------------------------------------------------------------\r\n  const valetSortEl = document.getElementById('valetSort')\r\n  const clearSortModalBtnContainer = document.querySelector('.sortable-container')\r\n  const clearSortModalBtn = document.querySelector('.openmodal-reset')\r\n  const clearSortBtn = document.querySelector('.clearsort')\r\n\r\n  const sortable = Sortable.create(valetSortEl, { // eslint-disable-line\r\n    store: {\r\n      // Get the order of elements. Called once during initialization.\r\n      get: function (sortable) {\r\n        const order = localStorage.getItem(sortable.options.group.name)\r\n        return order ? order.split('|') : []\r\n      },\r\n\r\n      // Save the order of elements. Called onEnd (when the item is dropped).\r\n      set: function (sortable) {\r\n        const order = sortable.toArray()\r\n        localStorage.setItem(sortable.options.group.name, order.join('|'))\r\n        clearSortModalBtnContainer.classList.remove('disabled')\r\n        clearSortModalBtn.removeAttribute('disabled')\r\n      }\r\n    },\r\n    group: 'hostslist',\r\n    forceFallback: true,\r\n    handle: '.grip',\r\n    animation: 150,\r\n    ghostClass: 'ghost-class'\r\n  })\r\n\r\n  // Set button to disabled if no sort is set in localStorage\r\n  function disableSortButton () {\r\n    if (localStorage.getItem('hostslist') === null) {\r\n      clearSortModalBtnContainer.classList.add('disabled')\r\n      clearSortModalBtn.setAttribute('disabled', true)\r\n    }\r\n  }\r\n  disableSortButton()\r\n\r\n  function clearSortStorage () {\r\n    delete localStorage.hostslist\r\n    newValetLinks.innerHTML = valetLinks // reload host list\r\n    removeHeaderRow()\r\n    disableSortButton()\r\n    closeModal()\r\n  }\r\n  // Clear list localStorage button\r\n  clearSortBtn.onclick = clearSortStorage\r\n\r\n  // ! modal\r\n  // --------------------------------------------------------------------------\r\n  // buttons to open \"modal\" from sidebar\r\n  const openModalResetBtn = document.querySelector('.openmodal-reset')\r\n  // modal container\r\n  const modal = document.querySelector('.modal')\r\n  const modalBg = document.querySelector('.modal-bg')\r\n  const closeSortModalBtn = document.querySelector('.cancelsort')\r\n\r\n  // Open modal(s)\r\n  function openModalReset () {\r\n    modal.classList.add('open', 'reset-list')\r\n    modalBg.classList.add('open')\r\n  }\r\n  openModalResetBtn.onclick = openModalReset\r\n\r\n  // Close modal(s)\r\n  function closeModal () {\r\n    modal.classList.add('closing')\r\n    modalBg.classList.add('closing')\r\n    setTimeout(function () {\r\n      modal.classList.remove('open', 'closing', 'reset-list')\r\n      modalBg.classList.remove('open', 'closing')\r\n    }, 1000)\r\n  }\r\n  closeSortModalBtn.onclick = closeModal\r\n  modalBg.onclick = closeModal\r\n\r\n  document.addEventListener('keyup', event => {\r\n    if (event.key === 'Escape') {\r\n      if (modal.classList.contains('open')) {\r\n        closeModal()\r\n      }\r\n    }\r\n  })\r\n\r\n  // Filter\r\n  // --------------------------------------------------------------------------\r\n  document.getElementById('filter-input').addEventListener('keyup', function () {\r\n    const searchFilter = this.value.toLowerCase()\r\n    const row = document.querySelectorAll('.valetlinks-container .row')\r\n\r\n    for (const host of row) {\r\n      const item = host.getAttribute('data-host').toLowerCase()\r\n      if (item.indexOf(searchFilter) === -1) {\r\n        host.classList.add('hide')\r\n      } else {\r\n        host.classList.remove('hide')\r\n      }\r\n    }\r\n  })\r\n\r\n  // Bring search filed to focus on page load\r\n  document.querySelector('#filter-input').focus()\r\n\r\n  // ! light or dark mode\r\n  // --------------------------------------------------------------------------\r\n  const conatiners = document.querySelectorAll('.color-mode')\r\n  const darkModeSwitch = document.getElementById('dark-mode-switch')\r\n\r\n  // set initial localStorage and body class if none found,\r\n  // or load class if found in localStorage\r\n  if (localStorage.getItem('themeMode') === null) {\r\n    localStorage.setItem('themeMode', 'light')\r\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\r\n  } else\r\n  if (localStorage.getItem('themeMode') === 'light') {\r\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\r\n  } else {\r\n    conatiners.forEach(mode => mode.classList.add('dark-mode'))\r\n  }\r\n\r\n  // switch between light and dark mode\r\n  darkModeSwitch.addEventListener('click', event => {\r\n    if (localStorage.getItem('themeMode') !== null) {\r\n      if (localStorage.getItem('themeMode') === 'light') {\r\n        localStorage.setItem('themeMode', 'dark')\r\n        conatiners.forEach(mode => mode.classList.remove('light-mode'))\r\n        conatiners.forEach(mode => mode.classList.add('dark-mode'))\r\n      } else {\r\n        localStorage.setItem('themeMode', 'light')\r\n        conatiners.forEach(mode => mode.classList.remove('dark-mode'))\r\n        conatiners.forEach(mode => mode.classList.add('light-mode'))\r\n      }\r\n    }\r\n  })\r\n\r\n  // ! color picker\r\n  // --------------------------------------------------------------------------\r\n  // \"active-color\" is set on color input 'name' attribute\r\n  const colorInput = document.getElementById('color-picker')\r\n\r\n  // set initial localStorage for active-color,\r\n  // or load active-color found in localStorage\r\n  if (localStorage.getItem('activeColor') === null) {\r\n    localStorage.setItem('activeColor', '#ba68c8')\r\n    const getActiveColor = localStorage.getItem('activeColor')\r\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\r\n    colorInput.setAttribute('value', getActiveColor)\r\n  } else {\r\n    const getActiveColor = localStorage.getItem('activeColor')\r\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\r\n    colorInput.setAttribute('value', getActiveColor)\r\n  }\r\n\r\n  // change active-color\r\n  function handleColorUpdate () {\r\n    document.documentElement.style.setProperty(`--${this.name}`, this.value)\r\n    localStorage.setItem('activeColor', colorInput.value)\r\n  }\r\n\r\n  colorInput.addEventListener('change', handleColorUpdate)\r\n  colorInput.addEventListener('mousemove', handleColorUpdate)\r\n}\r\ndocument.addEventListener('DOMContentLoaded', ready)\r\n"],"names":["ready","localStorage","window","htmlTag","document","querySelector","classList","add","selectValetLinks","newValetLinks","valetLinks","innerHTML","replace","localURL","removeHeaderRow","remove","getElementById","style","display","hostRow","children","hostCount","length","hostSite","item","innerText","setAttribute","valetVersion","getMariadbVersion","getValetVersion","dnsmasqVersion","getDnsmasqVersion","split","pop","mariadbVersion","nginxVersion","getNginxVersion","phpmyadminPath","phpmyadminURL","phpmyadminLink","phpmyadminVersion","getPHPmyadminPath","removeAttribute","localPathSpan","querySelectorAll","changeOnOver","this","changeOnOut","tooltip","setTimeout","forEach","path","addEventListener","valetSortEl","clearSortModalBtnContainer","clearSortModalBtn","clearSortBtn","getActiveColor","Sortable","create","store","get","sortable","order","getItem","options","group","name","set","toArray","setItem","join","forceFallback","handle","animation","ghostClass","disableSortButton","onclick","hostslist","closeModal","openModalResetBtn","modal","modalBg","closeSortModalBtn","event","key","contains","searchFilter","value","toLowerCase","host","getAttribute","indexOf","focus","conatiners","darkModeSwitch","mode","colorInput","handleColorUpdate","documentElement","setProperty"],"mappings":"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"}