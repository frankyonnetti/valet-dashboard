{"version":3,"file":"scripts.js","sources":["scripts.js"],"sourcesContent":["function ready () {\n  const localStorage = window.localStorage\n  // Add class when JS is loaded.\n  const htmlTag = document.querySelector('html')\n  htmlTag.classList.add('js-loaded')\n\n  const newValetLinks = document.querySelector('.valetlinks-container')\n  const valetLinks = newValetLinks.innerHTML\n\n  // ! Unique \"data\" attribute\n  // --------------------------------------------------------------------------\n  const hostRow = newValetLinks.children\n\n  for (let hostCount = 0; hostCount < hostRow.length; hostCount++) {\n    // add a unique \"data\" attribute to each row\n    const hostSite = hostRow[hostCount].children.item(1).innerText.replace(/\\./g, '_')\n    hostRow[hostCount].setAttribute('data-host', hostSite)\n  }\n\n  // ! trim down technology version output to get just the version number.\n  // --------------------------------------------------------------------------\n  // dnsmasq\n  const dnsmasqVersion = document.querySelector('.dnsmasq .tech-info')\n  if (dnsmasqVersion !== null) {\n    // get substring between two words\n    const getDnsmasqVersion = dnsmasqVersion.innerHTML.split('Dnsmasq version ').pop().split('  Copyright')[0]\n    dnsmasqVersion.innerHTML = getDnsmasqVersion\n  }\n  // mariadb\n  const mariadbVersion = document.querySelector('.mariadb .tech-info')\n  if (mariadbVersion !== null) {\n    // get substring between two words\n    const getMariadbVersion = mariadbVersion.innerHTML.split('Distrib ').pop().split('-MariaDB')[0]\n    mariadbVersion.innerHTML = getMariadbVersion\n  }\n  // nginx\n  const nginxVersion = document.querySelector('.nginx .tech-info')\n  if (nginxVersion !== null) {\n    // get the first set of floating numbers\n    const getNginxVersion = nginxVersion.innerHTML.replace('nginx version: nginx/', '')\n    nginxVersion.innerHTML = getNginxVersion\n  }\n  // phpmyadmin\n  const phpmyadminPath = document.querySelector('[data-host=\"phpmyadmin\"] .path em')\n  if (phpmyadminPath !== null) {\n    const phpmyadminURL = document.querySelector('[data-host=\"phpmyadmin\"] .url a')\n    const phpmyadminLink = document.querySelector('.phpmyadmin .tech-label a')\n    const phpmyadminVersion = document.querySelector('.phpmyadmin .tech-info')\n    const getPHPmyadminPath = phpmyadminPath.innerHTML.split('/')\n    document.querySelector('.phpmyadmin').removeAttribute('style')\n    phpmyadminLink.setAttribute('href', phpmyadminURL)\n    phpmyadminVersion.innerHTML = getPHPmyadminPath[getPHPmyadminPath.length - 3]\n  }\n\n  // ! show local path on hover\n  // --------------------------------------------------------------------------\n  const localPathSpan = document.querySelectorAll('.valetlinks-container .col span')\n\n  function changeOnOver () {\n    this.classList.add('show-path')\n  }\n\n  function changeOnOut () {\n    const tooltip = this\n    tooltip.classList.remove('show-path')\n    tooltip.classList.add('fade')\n    setTimeout(function () {\n      tooltip.classList.remove('fade')\n    }, 300)\n  }\n\n  function copyPath () {\n    const element = this\n    const path = element.innerText\n    navigator.clipboard.writeText(path)\n    element.innerHTML = '<em>Copied!</em>'\n    setTimeout(function () {\n      element.innerHTML = '<em>' + path + '</em>'\n    }, 5e2)\n  }\n\n  localPathSpan.forEach(path => path.addEventListener('mouseover', changeOnOver))\n  localPathSpan.forEach(path => path.addEventListener('mouseout', changeOnOut))\n  localPathSpan.forEach(path => path.addEventListener('click', copyPath))\n\n  // ! sortable\n  // --------------------------------------------------------------------------\n  const valetSortEl = document.getElementById('valetSort')\n  const clearSortModalBtnContainer = document.querySelector('.sortable-container')\n  const clearSortModalBtn = document.querySelector('.openmodal-reset')\n  const clearSortBtn = document.querySelector('.clearsort')\n\n  const sortable = Sortable.create(valetSortEl, { // eslint-disable-line\n    store: {\n      // Get the order of elements. Called once during initialization.\n      get: function (sortable) {\n        const order = localStorage.getItem(sortable.options.group.name)\n        return order ? order.split('|') : []\n      },\n\n      // Save the order of elements. Called onEnd (when the item is dropped).\n      set: function (sortable) {\n        const order = sortable.toArray()\n        localStorage.setItem(sortable.options.group.name, order.join('|'))\n        clearSortModalBtnContainer.classList.remove('disabled')\n        clearSortModalBtn.removeAttribute('disabled')\n      }\n    },\n    group: 'hostslist',\n    forceFallback: true,\n    handle: '.grip',\n    animation: 150,\n    ghostClass: 'ghost-class'\n  })\n\n  // Set button to disabled if no sort is set in localStorage\n  function disableSortButton () {\n    if (localStorage.getItem('hostslist') === null) {\n      clearSortModalBtnContainer.classList.add('disabled')\n      clearSortModalBtn.setAttribute('disabled', true)\n    }\n  }\n  disableSortButton()\n\n  function clearSortStorage () {\n    delete localStorage.hostslist\n    newValetLinks.innerHTML = valetLinks // reload host list\n    disableSortButton()\n    closeModal()\n  }\n  // Clear list localStorage button\n  clearSortBtn.onclick = clearSortStorage\n\n  // ! modal\n  // --------------------------------------------------------------------------\n  // buttons to open \"modal\" from sidebar\n  const openModalResetBtn = document.querySelector('.openmodal-reset')\n  // modal container\n  const modal = document.querySelector('.modal')\n  const modalBg = document.querySelector('.modal-bg')\n  const closeSortModalBtn = document.querySelector('.cancelsort')\n\n  // Open modal(s)\n  function openModalReset () {\n    modal.classList.add('open', 'reset-list')\n    modalBg.classList.add('open')\n  }\n  openModalResetBtn.onclick = openModalReset\n\n  // Close modal(s)\n  function closeModal () {\n    modal.classList.add('closing')\n    modalBg.classList.add('closing')\n    setTimeout(function () {\n      modal.classList.remove('open', 'closing', 'reset-list')\n      modalBg.classList.remove('open', 'closing')\n    }, 1000)\n  }\n  closeSortModalBtn.onclick = closeModal\n  modalBg.onclick = closeModal\n\n  document.addEventListener('keyup', event => {\n    if (event.key === 'Escape') {\n      if (modal.classList.contains('open')) {\n        closeModal()\n      }\n    }\n  })\n\n  // Filter\n  // --------------------------------------------------------------------------\n  document.getElementById('filter-input').addEventListener('keyup', function () {\n    const searchFilter = this.value.toLowerCase()\n    const row = document.querySelectorAll('.valetlinks-container .row')\n\n    for (const host of row) {\n      const item = host.getAttribute('data-host').toLowerCase()\n      if (item.indexOf(searchFilter) === -1) {\n        host.classList.add('hide')\n      } else {\n        host.classList.remove('hide')\n      }\n    }\n  })\n\n  // Bring search filed to focus on page load\n  const focusSwitch = document.getElementById('focus-quick-find-switch')\n\n  if (localStorage.getItem('focusToggle') === null) {\n    localStorage.setItem('focusToggle', 'false')\n    focusSwitch.classList.add('off')\n  } else\n  if (localStorage.getItem('focusToggle') === 'false') {\n    focusSwitch.classList.add('off')\n  } else {\n    focusSwitch.classList.add('on')\n    document.querySelector('#filter-input').focus()\n  }\n\n  focusSwitch.addEventListener('click', event => {\n    if (localStorage.getItem('focusToggle') !== null) {\n      if (localStorage.getItem('focusToggle') === 'false') {\n        focusSwitch.classList.remove('off')\n        focusSwitch.classList.add('on')\n        localStorage.setItem('focusToggle', 'true')\n        document.querySelector('#filter-input').focus()\n      } else {\n        focusSwitch.classList.remove('on')\n        focusSwitch.classList.add('off')\n        localStorage.setItem('focusToggle', 'false')\n      }\n    }\n  })\n\n  // ! light or dark mode\n  // --------------------------------------------------------------------------\n  const conatiners = document.querySelectorAll('.color-mode')\n  const darkModeSwitch = document.getElementById('dark-mode-switch')\n\n  // set initial localStorage and body class if none found,\n  // or load class if found in localStorage\n  if (localStorage.getItem('themeMode') === null) {\n    localStorage.setItem('themeMode', 'light')\n    darkModeSwitch.classList.add('off')\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else\n  if (localStorage.getItem('themeMode') === 'light') {\n    darkModeSwitch.classList.add('off')\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else {\n    darkModeSwitch.classList.add('on')\n    conatiners.forEach(mode => mode.classList.add('dark-mode'))\n  }\n\n  // switch between light and dark mode\n  darkModeSwitch.addEventListener('click', event => {\n    if (localStorage.getItem('themeMode') !== null) {\n      if (localStorage.getItem('themeMode') === 'light') {\n        darkModeSwitch.classList.remove('off')\n        darkModeSwitch.classList.add('on')\n        localStorage.setItem('themeMode', 'dark')\n        conatiners.forEach(mode => mode.classList.remove('light-mode'))\n        conatiners.forEach(mode => mode.classList.add('dark-mode'))\n      } else {\n        darkModeSwitch.classList.remove('on')\n        darkModeSwitch.classList.add('off')\n        localStorage.setItem('themeMode', 'light')\n        conatiners.forEach(mode => mode.classList.remove('dark-mode'))\n        conatiners.forEach(mode => mode.classList.add('light-mode'))\n      }\n    }\n  })\n\n  // ! color picker\n  // --------------------------------------------------------------------------\n  // \"active-color\" is set on color input 'name' attribute\n  const colorInput = document.getElementById('color-picker')\n\n  // set initial localStorage for active-color,\n  // or load active-color found in localStorage\n  if (localStorage.getItem('activeColor') === null) {\n    localStorage.setItem('activeColor', '#ba68c8')\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  } else {\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  }\n\n  // change active-color\n  function handleColorUpdate () {\n    document.documentElement.style.setProperty(`--${this.name}`, this.value)\n    localStorage.setItem('activeColor', colorInput.value)\n  }\n\n  colorInput.addEventListener('change', handleColorUpdate)\n  colorInput.addEventListener('mousemove', handleColorUpdate)\n}\ndocument.addEventListener('DOMContentLoaded', ready)\n"],"names":["ready","localStorage","window","htmlTag","document","querySelector","classList","add","newValetLinks","valetLinks","innerHTML","hostRow","children","let","hostCount","length","hostSite","item","innerText","replace","setAttribute","dnsmasqVersion","getMariadbVersion","getDnsmasqVersion","split","pop","mariadbVersion","nginxVersion","getNginxVersion","phpmyadminPath","phpmyadminURL","phpmyadminLink","phpmyadminVersion","getPHPmyadminPath","removeAttribute","localPathSpan","querySelectorAll","changeOnOver","this","changeOnOut","tooltip","remove","setTimeout","copyPath","element","path","navigator","clipboard","writeText","forEach","addEventListener","valetSortEl","getElementById","clearSortModalBtnContainer","clearSortModalBtn","clearSortBtn","getActiveColor","Sortable","create","store","get","sortable","order","getItem","options","group","name","set","toArray","setItem","join","forceFallback","handle","animation","ghostClass","disableSortButton","onclick","hostslist","closeModal","openModalResetBtn","modal","modalBg","closeSortModalBtn","event","key","contains","searchFilter","value","toLowerCase","host","getAttribute","indexOf","focusSwitch","focus","conatiners","darkModeSwitch","mode","colorInput","handleColorUpdate","documentElement","style","setProperty"],"mappings":"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"}