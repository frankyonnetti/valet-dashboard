{"version":3,"file":"scripts.js","sources":["scripts.js"],"sourcesContent":["function ready () {\n  const localStorage = window.localStorage\n  // Add class when JS is loaded.\n  const htmlTag = document.querySelector('html')\n  htmlTag.classList.add('js-loaded')\n\n  // ! terminal output / table\n  // --------------------------------------------------------------------------\n  // select terminal output table\n  const selectValetLinks = document.querySelector('#links-table')\n  // select container element\n  const newValetLinks = document.querySelector('.valetlinks-container')\n\n  // https://javascript.info/regexp-quantifiers\n  const valetLinks = selectValetLinks.innerHTML\n    // replace SSL column \"X\" with icon\n    .replace(/X/g, '<i class=\"fas fa-lock\"></i>')\n    // replace pluses \"+\" and dashes \"-\"\n    .replace(/\\+(.+)\\+/g, '')\n    // replace pipes \"|\" starting from column 5\n    .replace(/((?:[^|]*\\|){4}[^|]*)\\|/g, '$1</em></span></div></div>')\n    .replace(/((?:[^|]*\\|){3}[^|]*)\\|/g, '$1</div><div class=\"col path\"><span><em>')\n    .replace(/((?:[^|]*\\|){2}[^|]*)\\|/g, '$1</div><div class=\"col url\">')\n    .replace(/((?:[^|]*\\|){1}[^|]*)\\|/g, '$1</div><div class=\"col ssl\">')\n    .replace(/((?:[^|]*\\|){0}[^|]*)\\|/g, '$1<div class=\"row\"><div class=\"col grip\"></div><div class=\"col site\">')\n    // wrap anchor around URL\n    .replace(/http(.*)\\.test/g, function (localURL) {\n      return '<a href=\"' + localURL + '\" tabindex=\"2\">' + localURL + '</a>'\n    })\n\n  // build new hosts container\n  newValetLinks.innerHTML = valetLinks\n\n  // remove header row\n  function removeHeaderRow () {\n    document.querySelector('.valetlinks-container .row:first-child').remove()\n  }\n  removeHeaderRow()\n\n  // hide imported links table\n  document.getElementById('links-table').style.display = 'none'\n\n  // ! Unique \"data\" attribute\n  // --------------------------------------------------------------------------\n  const hostRow = newValetLinks.children\n\n  for (let hostCount = 0; hostCount < hostRow.length; hostCount++) {\n    // add a unique \"data\" attribute to each row\n    const hostSite = hostRow[hostCount].children.item(1).innerText.replace(/\\./g, '_')\n    hostRow[hostCount].setAttribute('data-host', hostSite)\n  }\n\n  // ! trim down technology version output to get just the version number.\n  // --------------------------------------------------------------------------\n  // valet\n  const valetVersion = document.querySelector('.valet-version')\n  // remove \"Laravel Valet\" from server version output\n  const getValetVersion = valetVersion.innerHTML.replace('Laravel Valet ', '')\n  valetVersion.innerHTML = getValetVersion\n  // dnsmasq\n  const dnsmasqVersion = document.querySelector('.dnsmasq .tech-info')\n  if (dnsmasqVersion !== null) {\n    // get substring between two words\n    const getDnsmasqVersion = dnsmasqVersion.innerHTML.split('Dnsmasq version ').pop().split('  Copyright')[0]\n    dnsmasqVersion.innerHTML = getDnsmasqVersion\n  }\n  // mariadb\n  const mariadbVersion = document.querySelector('.mariadb .tech-info')\n  if (mariadbVersion !== null) {\n    // get substring between two words\n    const getMariadbVersion = mariadbVersion.innerHTML.split('Distrib ').pop().split('-MariaDB')[0]\n    mariadbVersion.innerHTML = getMariadbVersion\n  }\n  // nginx\n  const nginxVersion = document.querySelector('.nginx .tech-info')\n  if (nginxVersion !== null) {\n    // get the first set of floating numbers\n    const getNginxVersion = nginxVersion.innerHTML.replace('nginx version: nginx/', '')\n    nginxVersion.innerHTML = getNginxVersion\n  }\n  // phpmyadmin\n  const phpmyadminPath = document.querySelector('[data-host=\"phpmyadmin\"] .path em')\n  if (phpmyadminPath !== null) {\n    const phpmyadminURL = document.querySelector('[data-host=\"phpmyadmin\"] .url a')\n    const phpmyadminLink = document.querySelector('.phpmyadmin .tech-label a')\n    const phpmyadminVersion = document.querySelector('.phpmyadmin .tech-info')\n    const getPHPmyadminPath = phpmyadminPath.innerHTML.split('/')\n    document.querySelector('.phpmyadmin').removeAttribute('style')\n    phpmyadminLink.setAttribute('href', phpmyadminURL)\n    phpmyadminVersion.innerHTML = getPHPmyadminPath[getPHPmyadminPath.length - 3]\n  }\n\n  // ! show local path on hover\n  // --------------------------------------------------------------------------\n  const localPathSpan = document.querySelectorAll('.valetlinks-container .col span')\n\n  function changeOnOver () {\n    this.classList.add('show-path')\n  }\n\n  function changeOnOut () {\n    const tooltip = this\n    tooltip.classList.remove('show-path')\n    tooltip.classList.add('fade')\n    setTimeout(function () {\n      tooltip.classList.remove('fade')\n    }, 300)\n  }\n\n  localPathSpan.forEach(path => path.addEventListener('mouseover', changeOnOver))\n  localPathSpan.forEach(path => path.addEventListener('mouseout', changeOnOut))\n\n  // ! sortable\n  // --------------------------------------------------------------------------\n  const valetSortEl = document.getElementById('valetSort')\n  const clearSortModalBtnContainer = document.querySelector('.sortable-container')\n  const clearSortModalBtn = document.querySelector('.openmodal-reset')\n  const clearSortBtn = document.querySelector('.clearsort')\n\n  const sortable = Sortable.create(valetSortEl, { // eslint-disable-line\n    store: {\n      // Get the order of elements. Called once during initialization.\n      get: function (sortable) {\n        const order = localStorage.getItem(sortable.options.group.name)\n        return order ? order.split('|') : []\n      },\n\n      // Save the order of elements. Called onEnd (when the item is dropped).\n      set: function (sortable) {\n        const order = sortable.toArray()\n        localStorage.setItem(sortable.options.group.name, order.join('|'))\n        clearSortModalBtnContainer.classList.remove('disabled')\n        clearSortModalBtn.removeAttribute('disabled')\n      }\n    },\n    group: 'hostslist',\n    forceFallback: true,\n    handle: '.grip',\n    animation: 150,\n    ghostClass: 'ghost-class'\n  })\n\n  // Set button to disabled if no sort is set in localStorage\n  function disableSortButton () {\n    if (localStorage.getItem('hostslist') === null) {\n      clearSortModalBtnContainer.classList.add('disabled')\n      clearSortModalBtn.setAttribute('disabled', true)\n    }\n  }\n  disableSortButton()\n\n  function clearSortStorage () {\n    delete localStorage.hostslist\n    newValetLinks.innerHTML = valetLinks // reload host list\n    removeHeaderRow()\n    disableSortButton()\n    closeModal()\n  }\n  // Clear list localStorage button\n  clearSortBtn.onclick = clearSortStorage\n\n  // ! modal\n  // --------------------------------------------------------------------------\n  // buttons to open \"modal\" from sidebar\n  const openModalResetBtn = document.querySelector('.openmodal-reset')\n  // modal container\n  const modal = document.querySelector('.modal')\n  const modalBg = document.querySelector('.modal-bg')\n  const closeSortModalBtn = document.querySelector('.cancelsort')\n\n  // Open modal(s)\n  function openModalReset () {\n    modal.classList.add('open', 'reset-list')\n    modalBg.classList.add('open')\n  }\n  openModalResetBtn.onclick = openModalReset\n\n  // Close modal(s)\n  function closeModal () {\n    modal.classList.add('closing')\n    modalBg.classList.add('closing')\n    setTimeout(function () {\n      modal.classList.remove('open', 'closing', 'reset-list')\n      modalBg.classList.remove('open', 'closing')\n    }, 1000)\n  }\n  closeSortModalBtn.onclick = closeModal\n  modalBg.onclick = closeModal\n\n  document.addEventListener('keyup', event => {\n    if (event.key === 'Escape') {\n      if (modal.classList.contains('open')) {\n        closeModal()\n      }\n    }\n  })\n\n  // Filter\n  // --------------------------------------------------------------------------\n  document.getElementById('filter-input').addEventListener('keyup', function () {\n    const searchFilter = this.value.toLowerCase()\n    const row = document.querySelectorAll('.valetlinks-container .row')\n\n    for (const host of row) {\n      const item = host.getAttribute('data-host').toLowerCase()\n      if (item.indexOf(searchFilter) === -1) {\n        host.classList.add('hide')\n      } else {\n        host.classList.remove('hide')\n      }\n    }\n  })\n\n  // Bring search filed to focus on page load\n  document.querySelector('#filter-input').focus()\n\n  // ! light or dark mode\n  // --------------------------------------------------------------------------\n  const conatiners = document.querySelectorAll('.color-mode')\n  const modeSwitch = document.getElementById('mode-switch')\n\n  // set initial localStorage and body class if none found,\n  // or load class if found in localStorage\n  if (localStorage.getItem('themeMode') === null) {\n    localStorage.setItem('themeMode', 'light')\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else\n  if (localStorage.getItem('themeMode') === 'light') {\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else {\n    conatiners.forEach(mode => mode.classList.add('dark-mode'))\n  }\n\n  // switch between light and dark mode\n  modeSwitch.addEventListener('click', event => {\n    if (localStorage.getItem('themeMode') !== null) {\n      if (localStorage.getItem('themeMode') === 'light') {\n        localStorage.setItem('themeMode', 'dark')\n        conatiners.forEach(mode => mode.classList.remove('light-mode'))\n        conatiners.forEach(mode => mode.classList.add('dark-mode'))\n      } else {\n        localStorage.setItem('themeMode', 'light')\n        conatiners.forEach(mode => mode.classList.remove('dark-mode'))\n        conatiners.forEach(mode => mode.classList.add('light-mode'))\n      }\n    }\n  })\n\n  // ! color picker\n  // --------------------------------------------------------------------------\n  // \"active-color\" is set on color input 'name' attribute\n  const colorInput = document.getElementById('color-picker')\n\n  // set initial localStorage for active-color,\n  // or load active-color found in localStorage\n  if (localStorage.getItem('activeColor') === null) {\n    localStorage.setItem('activeColor', '#ba68c8')\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  } else {\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  }\n\n  // change active-color\n  function handleColorUpdate () {\n    document.documentElement.style.setProperty(`--${this.name}`, this.value)\n    localStorage.setItem('activeColor', colorInput.value)\n  }\n\n  colorInput.addEventListener('change', handleColorUpdate)\n  colorInput.addEventListener('mousemove', handleColorUpdate)\n}\ndocument.addEventListener('DOMContentLoaded', ready)\n"],"names":["ready","localStorage","window","htmlTag","document","querySelector","classList","add","selectValetLinks","newValetLinks","valetLinks","innerHTML","replace","localURL","removeHeaderRow","remove","getElementById","style","display","hostRow","children","hostCount","length","hostSite","item","innerText","setAttribute","valetVersion","getMariadbVersion","getValetVersion","dnsmasqVersion","getDnsmasqVersion","split","pop","mariadbVersion","nginxVersion","getNginxVersion","phpmyadminPath","phpmyadminURL","phpmyadminLink","phpmyadminVersion","getPHPmyadminPath","removeAttribute","localPathSpan","querySelectorAll","changeOnOver","this","changeOnOut","tooltip","setTimeout","forEach","path","addEventListener","valetSortEl","clearSortModalBtnContainer","clearSortModalBtn","clearSortBtn","getActiveColor","Sortable","create","store","get","sortable","order","getItem","options","group","name","set","toArray","setItem","join","forceFallback","handle","animation","ghostClass","disableSortButton","onclick","hostslist","closeModal","openModalResetBtn","modal","modalBg","closeSortModalBtn","event","key","contains","searchFilter","value","toLowerCase","host","getAttribute","indexOf","focus","conatiners","modeSwitch","mode","colorInput","handleColorUpdate","documentElement","setProperty"],"mappings":"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"}