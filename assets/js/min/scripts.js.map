{"version":3,"file":"scripts.js","sources":["scripts.js"],"sourcesContent":["function ready () {\n  const localStorage = window.localStorage\n  // Add class when JS is loaded.\n  const htmlTag = document.querySelector('html')\n  htmlTag.classList.add('js-loaded')\n\n  // ! server version\n  // --------------------------------------------------------------------------\n  const valetVersion = document.querySelector('.server-version')\n  // remove \"Laravel Valet\" from server version output\n  const version = valetVersion.innerHTML.replace('Laravel Valet ', 'v')\n  // set new ouput\n  valetVersion.innerHTML = version\n\n  // ! terminal output / table\n  // --------------------------------------------------------------------------\n  // select terminal output table\n  const selectValetLinks = document.querySelector('#links-table')\n  // select container element\n  const newValetLinks = document.querySelector('.valetlinks-container')\n\n  // https://javascript.info/regexp-quantifiers\n  const valetLinks = selectValetLinks.innerHTML\n    // replace SSL column \"X\" with icon\n    .replace(/X/g, '<i class=\"fas fa-lock\"></i>')\n    // replace pluses \"+\" and dashes \"-\"\n    .replace(/\\+(.+)\\+/g, '')\n    // replace pipes \"|\" starting from column 5\n    .replace(/((?:[^|]*\\|){4}[^|]*)\\|/g, '$1</em></span></div></div>')\n    .replace(/((?:[^|]*\\|){3}[^|]*)\\|/g, '$1</div><div class=\"col path\"><span><em>')\n    .replace(/((?:[^|]*\\|){2}[^|]*)\\|/g, '$1</div><div class=\"col url\">')\n    .replace(/((?:[^|]*\\|){1}[^|]*)\\|/g, '$1</div><div class=\"col ssl\">')\n    .replace(/((?:[^|]*\\|){0}[^|]*)\\|/g, '$1<div class=\"row\"><div class=\"col grip\"></div><div class=\"col site\">')\n    // wrap anchor around URL\n    .replace(/http(.*).test/g, function (localURL) {\n      return '<a href=\"' + localURL + '\">' + localURL + '</a>'\n    })\n\n  // build new hosts container\n  newValetLinks.innerHTML = valetLinks\n\n  // remove header row\n  function removeHeaderRow () {\n    document.querySelector('.valetlinks-container .row:first-child').remove()\n  }\n  removeHeaderRow()\n\n  // hide imported links table\n  document.getElementById('links-table').style.display = 'none'\n\n  // ! show local path on hover\n  // --------------------------------------------------------------------------\n  const localPathSpan = document.querySelectorAll('.valetlinks-container .col span')\n\n  function changeOnOver () {\n    this.classList.add('show-path')\n  }\n\n  function changeOnOut () {\n    const tooltip = this\n    tooltip.classList.remove('show-path')\n    tooltip.classList.add('fade')\n    setTimeout(function () {\n      tooltip.classList.remove('fade')\n    }, 300)\n  }\n\n  localPathSpan.forEach(path => path.addEventListener('mouseover', changeOnOver))\n  localPathSpan.forEach(path => path.addEventListener('mouseout', changeOnOut))\n\n  // ! Grouping headers\n  // --------------------------------------------------------------------------\n  const groupField = document.querySelector('.create-group-input')\n  const groupButton = document.querySelector('.create-group-button')\n\n  // create grouping headers\n  groupButton.addEventListener('click', event => {\n    event.preventDefault()\n    const groupFieldValue = groupField.value\n    if (groupFieldValue.length < 1) return\n    const groupDiv = document.createElement('div')\n    groupDiv.setAttribute('data-group', 'GROUP_' + groupFieldValue)\n    groupDiv.innerHTML = `\n      <div class=\"grip\"></div>\n      <div class=\"label\"><em>${groupFieldValue}</em></div>\n      <div class=\"remove\"><i class=\"fas fa-times\"></i></div>`\n    groupDiv.classList.add('row', 'group')\n    localStorage.setItem('GROUP_' + groupFieldValue, groupDiv.outerHTML)\n    newValetLinks.prepend(groupDiv)\n    groupField.value = ''\n  })\n\n  // load grouping headers on load.\n  const search = 'GROUP_'\n  const groupValues = Object.keys(localStorage)\n                            .filter((key) => key.startsWith(search))\n                            .map((key) => localStorage[key])\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML\n  newValetLinks.insertAdjacentHTML('afterbegin', groupValues.join(''))\n\n  // delete gruoping header\n  const hostRow = newValetLinks.children\n  const groupClose = document.querySelectorAll('.group .remove')\n\n  for (let i = 0; i < hostRow.length; i++) {\n    if (groupClose[i] != null) {\n      const partentData = groupClose[i].parentNode.getAttribute('data-group')\n      groupClose[i].addEventListener('click', event => {\n        localStorage.removeItem(partentData)\n        groupDiv = document.querySelector('[data-group=\"' + partentData + '\"]')\n        groupDiv.remove()\n      })\n    }\n  }\n\n  // ! sortable\n  // --------------------------------------------------------------------------\n  const valetSortEl = document.getElementById('valetSort')\n  const clearSortBtnContainer = document.querySelector('.sortable-container')\n  const clearSortBtn = document.querySelector('.clearsort')\n\n  const sortable = Sortable.create(valetSortEl, { // eslint-disable-line\n    store: {\n      // Get the order of elements. Called once during initialization.\n      get: function (sortable) {\n        const order = localStorage.getItem(sortable.options.group.name)\n        return order ? order.split('|') : []\n      },\n\n      // Save the order of elements. Called onEnd (when the item is dropped).\n      set: function (sortable) {\n        const order = sortable.toArray()\n        localStorage.setItem(sortable.options.group.name, order.join('|'))\n        clearSortBtnContainer.classList.remove('disabled')\n        clearSortBtn.removeAttribute('disabled')\n      }\n    },\n    group: 'hostslist',\n    forceFallback: true,\n    handle: '.grip',\n    animation: 150,\n    ghostClass: 'ghost-class'\n  })\n\n  // Set button disabled if no sort\n  function disableSortButton () {\n    if (localStorage.getItem('hostslist') === null) {\n      clearSortBtnContainer.classList.add('disabled')\n      clearSortBtn.setAttribute('disabled', 'disabled')\n    }\n  }\n  disableSortButton()\n\n  // Clear sortable localStorage\n  function clearSortStorage () {\n    delete localStorage.hostslist\n    // location.reload()\n    newValetLinks.innerHTML = valetLinks // reload host list\n    removeHeaderRow()\n    disableSortButton()\n  }\n\n  // Clear list localStorage button\n  clearSortBtn.onclick = clearSortStorage\n\n  // ! light or dark mode\n  // --------------------------------------------------------------------------\n  const conatiners = document.querySelectorAll('.color-mode')\n  const modeSwitch = document.getElementById('mode-switch')\n\n  // set initial localStorage and body class if none found,\n  // or load class if found in localStorage\n  if (localStorage.getItem('themeMode') === null) {\n    localStorage.setItem('themeMode', 'light')\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else\n  if (localStorage.getItem('themeMode') === 'light') {\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else {\n    conatiners.forEach(mode => mode.classList.add('dark-mode'))\n  }\n\n  // switch between light and dark mode\n  modeSwitch.addEventListener('click', event => {\n    if (localStorage.getItem('themeMode') !== null) {\n      if (localStorage.getItem('themeMode') === 'light') {\n        localStorage.setItem('themeMode', 'dark')\n        conatiners.forEach(mode => mode.classList.remove('light-mode'))\n        conatiners.forEach(mode => mode.classList.add('dark-mode'))\n      } else {\n        localStorage.setItem('themeMode', 'light')\n        conatiners.forEach(mode => mode.classList.remove('dark-mode'))\n        conatiners.forEach(mode => mode.classList.add('light-mode'))\n      }\n    }\n  })\n\n  // ! color picker\n  // --------------------------------------------------------------------------\n  // \"active-color\" is set on color input 'name' attribute\n  const colorInput = document.getElementById('color-picker')\n\n  // set initial localStorage for active-color,\n  // or load active-color found in localStorage\n  if (localStorage.getItem('activeColor') === null) {\n    localStorage.setItem('activeColor', '#ba68c8')\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  } else {\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  }\n\n  // change active-color\n  function handleColorUpdate () {\n    // console.log(this.value)\n    document.documentElement.style.setProperty(`--${this.name}`, this.value)\n    localStorage.setItem('activeColor', colorInput.value)\n  }\n\n  colorInput.addEventListener('change', handleColorUpdate)\n  colorInput.addEventListener('mousemove', handleColorUpdate)\n}\ndocument.addEventListener('DOMContentLoaded', ready)\n"],"names":["ready","localStorage","window","htmlTag","document","querySelector","classList","add","valetVersion","version","innerHTML","replace","selectValetLinks","newValetLinks","valetLinks","localURL","removeHeaderRow","remove","getElementById","style","display","localPathSpan","querySelectorAll","changeOnOver","this","changeOnOut","tooltip","setTimeout","forEach","path","addEventListener","groupField","groupButton","event","preventDefault","groupFieldValue","value","length","groupDiv","createElement","setAttribute","setItem","outerHTML","prepend","groupValues","Object","keys","filter","key","startsWith","map","insertAdjacentHTML","join","partentData","hostRow","children","groupClose","i","parentNode","getAttribute","removeItem","valetSortEl","clearSortBtnContainer","clearSortBtn","getActiveColor","Sortable","create","store","get","sortable","order","getItem","options","group","name","split","set","toArray","removeAttribute","forceFallback","handle","animation","ghostClass","disableSortButton","onclick","hostslist","conatiners","modeSwitch","mode","colorInput","handleColorUpdate","documentElement","setProperty"],"mappings":"AAAA,SAASA,QACP,MAAMC,EAAeC,OAAOD,aAEtBE,EAAUC,SAASC,cAAc,QACvCF,EAAQG,UAAUC,IAAI,aAItB,MAAMC,EAAeJ,SAASC,cAAc,mBAE5C,IAAMI,EAAUD,EAAaE,UAAUC,QAAQ,iBAAkB,KAEjEH,EAAaE,UAAYD,EAKzB,MAAMG,EAAmBR,SAASC,cAAc,gBAE1CQ,EAAgBT,SAASC,cAAc,yBAG7C,IAAMS,EAAaF,EAAiBF,UAEjCC,QAAQ,KAAM,+BAEdA,QAAQ,YAAa,IAErBA,QAAQ,2BAA4B,8BACpCA,QAAQ,2BAA4B,4CACpCA,QAAQ,2BAA4B,iCACpCA,QAAQ,2BAA4B,iCACpCA,QAAQ,2BAA4B,yEAEpCA,QAAQ,iBAAkB,SAAUI,GACnC,MAAO,YAAcA,EAAW,KAAOA,EAAW,SAOtD,SAASC,IACPZ,SAASC,cAAc,0CAA0CY,SAJnEJ,EAAcH,UAAYI,EAM1BE,IAGAZ,SAASc,eAAe,eAAeC,MAAMC,QAAU,OAIvD,MAAMC,EAAgBjB,SAASkB,iBAAiB,mCAEhD,SAASC,IACPC,KAAKlB,UAAUC,IAAI,aAGrB,SAASkB,IACP,IAAMC,EAAUF,KAChBE,EAAQpB,UAAUW,OAAO,aACzBS,EAAQpB,UAAUC,IAAI,QACtBoB,WAAW,WACTD,EAAQpB,UAAUW,OAAO,SACxB,KAGLI,EAAcO,QAAQC,GAAQA,EAAKC,iBAAiB,YAAaP,IACjEF,EAAcO,QAAQC,GAAQA,EAAKC,iBAAiB,WAAYL,IAIhE,MAAMM,EAAa3B,SAASC,cAAc,uBACpC2B,EAAc5B,SAASC,cAAc,wBAG3C2B,EAAYF,iBAAiB,QAASG,IACpCA,EAAMC,iBACAC,EAAkBJ,EAAWK,MACnC,KAAID,EAAgBE,OAAS,GAA7B,CACA,MAAMC,EAAWlC,SAASmC,cAAc,OACxCD,EAASE,aAAa,aAAc,SAAWL,GAC/CG,EAAS5B;;+BAEkByB;8DAE3BG,EAAShC,UAAUC,IAAI,MAAO,SAC9BN,EAAawC,QAAQ,SAAWN,EAAiBG,EAASI,WAC1D7B,EAAc8B,QAAQL,GACtBP,EAAWK,MAAQ,MAKrB,MAAMQ,EAAcC,OAAOC,KAAK7C,GACL8C,OAAO,GAASC,EAAIC,WAFhC,WAGYC,IAAI,GAASjD,EAAa+C,IAGrDnC,EAAcsC,mBAAmB,aAAcP,EAAYQ,KAAK,KAGhE,IAKUC,EALJC,EAAUzC,EAAc0C,SAC9B,MAAMC,EAAapD,SAASkB,iBAAiB,kBAE7C,IAAK,IAAImC,EAAI,EAAGA,EAAIH,EAAQjB,OAAQoB,IACb,MAAjBD,EAAWC,KACPJ,EAAcG,EAAWC,GAAGC,WAAWC,aAAa,cAC1DH,EAAWC,GAAG3B,iBAAiB,QAASG,IACtChC,EAAa2D,WAAWP,GACxBf,SAAWlC,SAASC,cAAc,gBAAkBgD,EAAc,MAClEf,SAASrB,YAOT4C,EAAczD,SAASc,eAAe,aAC5C,MAAM4C,EAAwB1D,SAASC,cAAc,uBAC/C0D,EAAe3D,SAASC,cAAc,cAE5C,IAyFQ2D,EAzFSC,SAASC,OAAOL,EAAa,CAC5CM,MAAO,CAELC,IAAK,SAAUC,GACb,MAAMC,EAAQrE,EAAasE,QAAQF,EAASG,QAAQC,MAAMC,MAC1D,OAAOJ,EAAQA,EAAMK,MAAM,KAAO,IAIpCC,IAAK,SAAUP,GACb,MAAMC,EAAQD,EAASQ,UACvB5E,EAAawC,QAAQ4B,EAASG,QAAQC,MAAMC,KAAMJ,EAAMlB,KAAK,MAC7DU,EAAsBxD,UAAUW,OAAO,YACvC8C,EAAae,gBAAgB,cAGjCL,MAAO,YACPM,eAAe,EACfC,OAAQ,QACRC,UAAW,IACXC,WAAY,gBAId,SAASC,IACmC,OAAtClF,EAAasE,QAAQ,eACvBT,EAAsBxD,UAAUC,IAAI,YACpCwD,EAAavB,aAAa,WAAY,aAG1C2C,IAYApB,EAAaqB,QATb,kBACSnF,EAAaoF,UAEpBxE,EAAcH,UAAYI,EAC1BE,IACAmE,KAQF,MAAMG,EAAalF,SAASkB,iBAAiB,eACvCiE,EAAanF,SAASc,eAAe,eAID,OAAtCjB,EAAasE,QAAQ,cACvBtE,EAAawC,QAAQ,YAAa,SAClC6C,EAAW1D,QAAQ4D,GAAQA,EAAKlF,UAAUC,IAAI,gBAEN,UAAtCN,EAAasE,QAAQ,aACvBe,EAAW1D,QAAQ4D,GAAQA,EAAKlF,UAAUC,IAAI,eAE9C+E,EAAW1D,QAAQ4D,GAAQA,EAAKlF,UAAUC,IAAI,cAIhDgF,EAAWzD,iBAAiB,QAASG,IACO,OAAtChC,EAAasE,QAAQ,eACmB,UAAtCtE,EAAasE,QAAQ,cACvBtE,EAAawC,QAAQ,YAAa,QAClC6C,EAAW1D,QAAQ4D,GAAQA,EAAKlF,UAAUW,OAAO,eACjDqE,EAAW1D,QAAQ4D,GAAQA,EAAKlF,UAAUC,IAAI,gBAE9CN,EAAawC,QAAQ,YAAa,SAClC6C,EAAW1D,QAAQ4D,GAAQA,EAAKlF,UAAUW,OAAO,cACjDqE,EAAW1D,QAAQ4D,GAAQA,EAAKlF,UAAUC,IAAI,mBAQpD,MAAMkF,EAAarF,SAASc,eAAe,gBAgB3C,SAASwE,IAEPtF,SAASuF,gBAAgBxE,MAAMyE,iBAAiBpE,KAAKkD,OAAQlD,KAAKY,OAClEnC,EAAawC,QAAQ,cAAegD,EAAWrD,OAfL,OAAxCnC,EAAasE,QAAQ,gBACvBtE,EAAawC,QAAQ,cAAe,WAC9BuB,EAAiB/D,EAAasE,QAAQ,eAC5CnE,SAASuF,gBAAgBnD,aAAa,QAAS,kBAAoBwB,EAAiB,KACpFyB,EAAWjD,aAAa,QAASwB,KAE3BA,EAAiB/D,EAAasE,QAAQ,eAC5CnE,SAASuF,gBAAgBnD,aAAa,QAAS,kBAAoBwB,EAAiB,KACpFyB,EAAWjD,aAAa,QAASwB,IAUnCyB,EAAW3D,iBAAiB,SAAU4D,GACtCD,EAAW3D,iBAAiB,YAAa4D,GAE3CtF,SAAS0B,iBAAiB,mBAAoB9B"}