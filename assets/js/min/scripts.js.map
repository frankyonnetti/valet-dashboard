{"version":3,"file":"scripts.js","sources":["scripts.js"],"sourcesContent":["function ready () {\n  const localStorage = window.localStorage\n  // Add class when JS is loaded.\n  const htmlTag = document.querySelector('html')\n  htmlTag.classList.add('js-loaded')\n\n  // ! server version\n  // --------------------------------------------------------------------------\n  const valetVersion = document.querySelector('.server-version')\n  // remove \"Laravel Valet\" from server version output\n  const version = valetVersion.innerHTML.replace('Laravel Valet ', 'v')\n  // set new ouput\n  valetVersion.innerHTML = version\n\n  // ! terminal output / table\n  // --------------------------------------------------------------------------\n  // select terminal output table\n  const selectValetLinks = document.querySelector('#links-table')\n  // select container element\n  const newValetLinks = document.querySelector('.valetlinks-container')\n\n  // https://javascript.info/regexp-quantifiers\n  const valetLinks = selectValetLinks.innerHTML\n    // replace SSL column \"X\" with icon\n    .replace(/X/g, '<i class=\"fas fa-lock\"></i>')\n    // replace pluses \"+\" and dashes \"-\"\n    .replace(/\\+(.+)\\+/g, '')\n    // replace pipes \"|\" starting from column 5\n    .replace(/((?:[^|]*\\|){4}[^|]*)\\|/g, '$1</em></span></div></div>')\n    .replace(/((?:[^|]*\\|){3}[^|]*)\\|/g, '$1</div><div class=\"col path\"><span><em>')\n    .replace(/((?:[^|]*\\|){2}[^|]*)\\|/g, '$1</div><div class=\"col url\">')\n    .replace(/((?:[^|]*\\|){1}[^|]*)\\|/g, '$1</div><div class=\"col ssl\">')\n    .replace(/((?:[^|]*\\|){0}[^|]*)\\|/g, '$1<div class=\"row\"><div class=\"col grip\"></div><div class=\"col site\">')\n    // wrap anchor around URL\n    .replace(/http(.*).test/g, function (localURL) {\n      return '<a href=\"' + localURL + '\">' + localURL + '</a>'\n    })\n\n  // build new hosts container\n  newValetLinks.innerHTML = valetLinks\n\n  // remove header row\n  function removeHeaderRow () {\n    document.querySelector('.valetlinks-container .row:first-child').remove()\n  }\n  removeHeaderRow()\n\n  // hide imported links table\n  document.getElementById('links-table').style.display = 'none'\n\n  // ! show local path on hover\n  // --------------------------------------------------------------------------\n  const localPathSpan = document.querySelectorAll('.valetlinks-container .col span')\n\n  function changeOnOver () {\n    this.classList.add('show-path')\n  }\n\n  function changeOnOut () {\n    const tooltip = this\n    tooltip.classList.remove('show-path')\n    tooltip.classList.add('fade')\n    setTimeout(function () {\n      tooltip.classList.remove('fade')\n    }, 300)\n  }\n\n  localPathSpan.forEach(path => path.addEventListener('mouseover', changeOnOver))\n  localPathSpan.forEach(path => path.addEventListener('mouseout', changeOnOut))\n\n  // ! Grouping headers\n  // --------------------------------------------------------------------------\n  const groupField = document.querySelector('.create-group-input')\n  const groupButton = document.querySelector('.create-group')\n\n  // create grouping headers\n  function createGroupHeader () {\n    const timeStamp = Date.now()\n    const groupFieldValue = groupField.value.replace(/\\s+/g, '_') + '_' + timeStamp\n    const groupFieldValueLabel = groupField.value\n    if (groupFieldValueLabel.length < 1) { return }\n    const groupDiv = document.createElement('div')\n    groupDiv.setAttribute('data-group', 'GROUP_' + groupFieldValue)\n    groupDiv.innerHTML = `\n    <div class=\"grip\"></div>\n    <div class=\"label\"><em>${groupFieldValueLabel}</em></div>\n    <div class=\"remove\"><i class=\"fas fa-times\"></i></div>`\n    groupDiv.classList.add('row', 'group')\n    localStorage.setItem('GROUP_' + groupFieldValue, groupDiv.outerHTML)\n    newValetLinks.prepend(groupDiv)\n    groupField.value = ''\n    // reload \"delete group header\" function\n    deleteGroupHeader()\n  }\n\n  groupButton.addEventListener('click', event => {\n    createGroupHeader()\n    closeModal()\n    event.preventDefault()\n  })\n\n  // load grouping headers on load.\n  const search = 'GROUP_'\n  const groupValues = Object\n    .keys(localStorage)\n    .filter((key) => key.startsWith(search))\n    .map((key) => localStorage[key])\n  // https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML\n  newValetLinks.insertAdjacentHTML('afterbegin', groupValues.join(''))\n\n  // delete grouping header button\n  function deleteGroupHeader () {\n    const hostRow = newValetLinks.children\n    const groupClose = document.querySelectorAll('.group .remove')\n\n    for (let i = 0; i < hostRow.length; i++) {\n      if (groupClose[i] != null) {\n        const partentData = groupClose[i].parentNode.getAttribute('data-group')\n        groupClose[i].addEventListener('click', event => {\n          localStorage.removeItem(partentData)\n          const groupDiv = document.querySelector('[data-group=\"' + partentData + '\"]')\n          groupDiv.remove()\n        })\n      }\n    }\n  }\n  deleteGroupHeader()\n\n  // ! sortable\n  // --------------------------------------------------------------------------\n  const valetSortEl = document.getElementById('valetSort')\n  const clearSortModalBtnContainer = document.querySelector('.sortable-container')\n  const clearSortModalBtn = document.querySelector('.openmodal-reset')\n  const clearSortBtn = document.querySelector('.clearsort')\n\n  const sortable = Sortable.create(valetSortEl, { // eslint-disable-line\n    store: {\n      // Get the order of elements. Called once during initialization.\n      get: function (sortable) {\n        const order = localStorage.getItem(sortable.options.group.name)\n        return order ? order.split('|') : []\n      },\n\n      // Save the order of elements. Called onEnd (when the item is dropped).\n      set: function (sortable) {\n        const order = sortable.toArray()\n        localStorage.setItem(sortable.options.group.name, order.join('|'))\n        clearSortModalBtnContainer.classList.remove('disabled')\n        clearSortModalBtn.removeAttribute('disabled')\n      }\n    },\n    group: 'hostslist',\n    forceFallback: true,\n    handle: '.grip',\n    animation: 150,\n    ghostClass: 'ghost-class'\n  })\n\n  // Set button to disabled if no sort is set in localStorage\n  function disableSortButton () {\n    if (localStorage.getItem('hostslist') === null) {\n      clearSortModalBtnContainer.classList.add('disabled')\n      clearSortModalBtn.setAttribute('disabled', true)\n    }\n  }\n  disableSortButton()\n\n  // Clear sortable and grouping localStorage\n  function clearGroupingStorage () {\n    const search = 'GROUP_'\n    Object\n      .keys(localStorage)\n      .filter((key) => key.startsWith(search))\n      .map((key) => delete localStorage[key])\n  }\n\n  function clearSortStorage () {\n    delete localStorage.hostslist\n    clearGroupingStorage()\n    newValetLinks.innerHTML = valetLinks // reload host list\n    removeHeaderRow()\n    disableSortButton()\n    closeModal()\n  }\n  // Clear list localStorage button\n  clearSortBtn.onclick = clearSortStorage\n\n  // ! modal\n  // --------------------------------------------------------------------------\n  // buttons to open \"modal\" from sidebar\n  const openModalResetBtn = document.querySelector('.openmodal-reset')\n  const openModalAddBtn = document.querySelector('.openmodal-add')\n  // modal container\n  const modal = document.querySelector('.modal')\n  const modalBg = document.querySelector('.modal-bg')\n  const modalInput = document.querySelector('.create-group-input')\n  const closeSortModalBtn = document.querySelector('.cancelsort')\n  const closeCreateModalBtn = document.querySelector('.cancel-group')\n\n  // Open modal(s)\n  function openModalReset () {\n    modal.classList.add('open', 'reset-list')\n    modalBg.classList.add('open')\n  }\n  openModalResetBtn.onclick = openModalReset\n\n  function openModalAdd () {\n    modal.classList.add('open', 'add-group')\n    modalBg.classList.add('open')\n    setTimeout(function () {\n      modalInput.focus()\n    }, 750)\n  }\n  openModalAddBtn.onclick = openModalAdd\n\n  // CLose modal(s)\n  function closeModal () {\n    modal.classList.add('closing')\n    modalBg.classList.add('closing')\n    setTimeout(function () {\n      modal.classList.remove('open', 'closing', 'reset-list', 'add-group')\n      modalBg.classList.remove('open', 'closing')\n    }, 1000)\n  }\n  closeSortModalBtn.onclick = closeModal\n  closeCreateModalBtn.onclick = closeModal\n  modalBg.onclick = closeModal\n\n  document.addEventListener('keyup', event => {\n    if (event.key === 'Escape') {\n      if (modal.classList.contains('open')) {\n        closeModal()\n      }\n    }\n  })\n\n  // add new group header with key\n  document.addEventListener('keyup', event => {\n    if (event.key === 'Enter') {\n      if (modal.classList.contains('open', 'add-group')) {\n        createGroupHeader()\n        closeModal()\n      }\n    }\n  })\n\n  // ! light or dark mode\n  // --------------------------------------------------------------------------\n  const conatiners = document.querySelectorAll('.color-mode')\n  const modeSwitch = document.getElementById('mode-switch')\n\n  // set initial localStorage and body class if none found,\n  // or load class if found in localStorage\n  if (localStorage.getItem('themeMode') === null) {\n    localStorage.setItem('themeMode', 'light')\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else\n  if (localStorage.getItem('themeMode') === 'light') {\n    conatiners.forEach(mode => mode.classList.add('light-mode'))\n  } else {\n    conatiners.forEach(mode => mode.classList.add('dark-mode'))\n  }\n\n  // switch between light and dark mode\n  modeSwitch.addEventListener('click', event => {\n    if (localStorage.getItem('themeMode') !== null) {\n      if (localStorage.getItem('themeMode') === 'light') {\n        localStorage.setItem('themeMode', 'dark')\n        conatiners.forEach(mode => mode.classList.remove('light-mode'))\n        conatiners.forEach(mode => mode.classList.add('dark-mode'))\n      } else {\n        localStorage.setItem('themeMode', 'light')\n        conatiners.forEach(mode => mode.classList.remove('dark-mode'))\n        conatiners.forEach(mode => mode.classList.add('light-mode'))\n      }\n    }\n  })\n\n  // ! color picker\n  // --------------------------------------------------------------------------\n  // \"active-color\" is set on color input 'name' attribute\n  const colorInput = document.getElementById('color-picker')\n\n  // set initial localStorage for active-color,\n  // or load active-color found in localStorage\n  if (localStorage.getItem('activeColor') === null) {\n    localStorage.setItem('activeColor', '#ba68c8')\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  } else {\n    const getActiveColor = localStorage.getItem('activeColor')\n    document.documentElement.setAttribute('style', '--active-color:' + getActiveColor + ';')\n    colorInput.setAttribute('value', getActiveColor)\n  }\n\n  // change active-color\n  function handleColorUpdate () {\n    document.documentElement.style.setProperty(`--${this.name}`, this.value)\n    localStorage.setItem('activeColor', colorInput.value)\n  }\n\n  colorInput.addEventListener('change', handleColorUpdate)\n  colorInput.addEventListener('mousemove', handleColorUpdate)\n}\ndocument.addEventListener('DOMContentLoaded', ready)\n"],"names":["ready","localStorage","window","htmlTag","document","querySelector","classList","add","valetVersion","version","innerHTML","replace","selectValetLinks","newValetLinks","valetLinks","localURL","removeHeaderRow","remove","getElementById","style","display","localPathSpan","querySelectorAll","changeOnOver","this","changeOnOut","tooltip","setTimeout","forEach","path","addEventListener","groupField","groupButton","createGroupHeader","timeStamp","Date","now","groupFieldValue","value","groupFieldValueLabel","length","groupDiv","createElement","setAttribute","setItem","outerHTML","prepend","deleteGroupHeader","event","closeModal","preventDefault","groupValues","Object","keys","filter","key","startsWith","map","hostRow","children","groupClose","i","partentData","parentNode","getAttribute","removeItem","insertAdjacentHTML","join","valetSortEl","clearSortModalBtnContainer","clearSortModalBtn","clearSortBtn","getActiveColor","Sortable","create","store","get","sortable","order","getItem","options","group","name","split","set","toArray","removeAttribute","forceFallback","handle","animation","ghostClass","disableSortButton","onclick","hostslist","openModalResetBtn","openModalAddBtn","modal","modalBg","modalInput","closeSortModalBtn","closeCreateModalBtn","focus","contains","conatiners","modeSwitch","mode","colorInput","handleColorUpdate","documentElement","setProperty"],"mappings":"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"}